=pod

=encoding utf8

=head1 NAME

wmbright - dockapp that provides monitor brightness control

=head1 SYNOPSIS

B<wmbright> [B<-hkov>] [B<-d> I<display>] [B<-e> I<name>] [B<-f> I<conffile>]

=head1 DESCRIPTION

B<wmbright> is a brightness control dockapp in the style of L<wmix(1x)>
that allows control of backlight level for some laptop monitors and gamma
manipulation for most outputs.

The options are as follows:

=over

=item B<-d> I<display>

Connect to remote X display.

=item B<-e> I<name>

Exclude output, can be used many times.

=item B<-f> I<conffile>

Parse configuration file.
Default: I<~/.wmbrightrc>.

=item B<-h>

Print help and exit.

=item B<-k>

Disable grabbing of brightness control keys.

=item B<-o>

Disable OSD.

=item B<-v>

Verbose mode.

=back

=head2 Usage

Upon starting, B<wmbright> detects all active outputs and tries to determine
the best way to control their brightness.
Backlight control is used if available, with gamma manipulation as a fallback.
There are multiple ways to control brightness with B<wmbright>:

=over

=item 1.

Click and drag on the knob.

=item 2.

Use the mouse wheel anywhere inside the dockapp.

=item 3.

Use the standard brightness keys if available on your keyboard.

=item 4.

Send the signals SIGUSR1 and SIGUSR2.

=back

Initially, B<wmbright> is set to the "ALL" output which means that any
brightness change is applied to all available outputs simultaneously.
Use the arrow buttons on the bottom left to select individual outputs instead.

Above the arrow buttons are indicators for the different brightness control
methods. Typically "BL", i.e., backlight, is superior as it will actually
control the backlight of your monitor rather than just changing the colours of
the pixels, but if you prefer gamma manipulation, click on the gamma indicator
to switch to the gamma method. When wmbright is set to the "ALL" output,
clicking the the indicators will (try to) switch the method of all outputs at
once.

=head1 CONFIGURATION FILE

B<wmbright> will read configuration values from a I<.wmbrightrc> file in your
home directory. The values understood are the following (these are also the
defaults, in case no configuration file is found):

    # 1 = yes, 0 = no

    mousewheel=1            # use mousewheel?
    scrolltext=1            # scroll output names when they don't fit
    osd=1                   # display OSD?
    osdcolor=green          # color of the OSD (from rgb.txt)
    wheelbtn1=4             # which mouse button is "wheel up"
    wheelbtn2=5             # which mouse button is "wheel down"
    wheelstep=3             # the step for mouse wheel adjustment

Additionally, an exclude parameter is understood, allowing outputs to be
excluded from B<wmbright> control:

    exclude=HDMI-0
    exclude=DVI-I-1

A sample configuration file is provided in F<sample.wmbrightrc>.

=head1 TROUBLESHOOTING

=head2 Xorg config

B<wmbright> uses libxrandr to manipulate backlight as well as gamma. Sometimes
xrandr cannot access the backlight property out of the box. If your system
contains the directory F</sys/class/backlight/intel_backlight> but backlight
manipulation does not work, it is likely that this can be remedied by adding
the file F</etc/X11/xorg.conf.d/20-video.conf> with the following contents (or
modifying your current xorg config to the same effect):

    Section "Device"
        Identifier  "Intel Graphics"
        Driver      "intel"
        Option      "Backlight"  "intel_backlight"
    EndSection

=head2 Night light

Night light applications such as B<redshift> typically use the same gamma
controls as B<wmbright>. If your brightness seems to revert shortly after
adjusting it with B<wmbright>, it's likely that you have some sort of night
light software running.  There is not much that can be done about this outside
of disabling the night light app.

=head1 SIGNAL HANDLING

=over

=item USR1

Increase backlight.

=item USR2

Decrease backlight.

=back

=head1 FILES

=over

=item F<~/.wmbrightrc>

Configuration file.

=back

=head1 SEE ALSO

L<xrandr(1)>

=cut
